<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Пример графика с осью времени</title>
  <!-- старый комплект работает!
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.2.0/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-moment/1.0.1/chartjs-adapter-moment.min.js"></script>
  -->
  <script src="./scripts/chart.umd.min_v4.2.0.js"></script>
  <script src="./scripts/DateTimeAdapter/moment-with-locales.min_v2.29.4.js"></script>
  <script src="./scripts/DateTimeAdapter/chartjs-adapter-moment.min_v1.0.1.js"></script>
</head>
<body>
<canvas id="chart1" width="800" height="450"></canvas>  
<hr>
<canvas id="chart2" width="800" height="450"></canvas>  
<script>
moment.locale('ru');
//console.log(moment().format('LLLL'));
//console.log(moment.utc('2023-01-19T09:50:05Z'));
console.log(moment().unix());
console.log(Date(1674130000100));
//console.log(moment().toString());
//console.log(moment().toDate());
//console.log(moment().toJSON());

const xy2 = [
        {x: 1674110951000, y: 20},
	{x: 1674113952000, y: 10},
        {x: 1674118053000, y: 30},
	{x: 1674121154000, y: 33},
        {x: 1674121255000, y: 23},
	{x: 1674125056000, y: 25},
        {x: 1674125157000, y: 26},
	{x: 1674128058000, y: 23},
        {x: 1674128159000, y: 20},
	{x: 1674129000000, y: 10},
        {x: 1674130001000, y: 20}
	];


new Chart('chart1', {
  type: 'scatter',
  data: {
    datasets: [{
      label: 'My Dataset',
      data: xy2,
      parsing: false,//{xAxisKey: "x2", yAxisKey: "y2"}
      showLine: true,
      lineTension: 0.3,
      borderColor: 'rgb(100, 100, 255)'
    }],
  },
  options: {
    scales: {
      x: {
        type: 'time',
        time: {
//	  unit: 'millisecond',
	  unit: 'second',
//	  unit: 'minute',
//	  unit: 'hour',
//	  unit: 'day',
//	  unit: 'week',
//	  unit: 'month',
//	  unit: 'quarter',
//	  unit: 'year',
          displayFormats: {
//	  millisecond: 'D MMM yyyy HH:mm:ss'
	  second: 'D MMM yyyy HH:mm:ss'
//	  minute: 'D MMM yyyy HH:mm:ss'
//	  hour: 'D MMM yyyy HH:mm:ss'
//	  day: 'D MMM yyyy HH:mm:ss'
//	  week: 'D MMM yyyy HH:mm:ss'
//	  month: 'D MMM yyyy HH:mm:ss'
//	  quarter: 'D MMM yyyy HH:mm:ss'
//	  year: 'D MMM yyyy HH:mm:ss'
          }
        },
        grid: {
          drawTicks: true,
          tickColor: "green",
          tickWidth: 2,
          tickLength: 32,
          color: "blue",
          borderColor: "black",
          borderDash: [50, 100],
	  tickBorderDash: [40, 80]
        },
        ticks: {
          color: "red",
          font: {
            weight: "bold"
	  }
        }
      },
      y: {
//        type: 'time',
        time: {
          parser: 'HH:mm',
          unit: 'hour',
          stepSize: 1,
          displayFormats: {
            hour: 'HH:mm'
          },
          tooltipFormat: 'HH:mm'
        },
        ticks: {
          min: '00:00',
          max: '08:00'
        }
      }
    }
  }
});
const xy1 = [
        { x: '2022-11-02 00:00', y: '00:00' }, 
        { x: '2022-11-02 10:00', y: '01:00' }, 
        { x: '2022-11-02 20:00', y: '02:00' }, 
        { x: '2022-11-07 03:00', y: '08:00' }, 
        { x: '2022-11-08 06:00', y: '06:00' },
        { x: '2022-11-09 06:00', y: '06:00' }
      ];
new Chart('chart2', {
  type: 'scatter',
  data: {
    datasets: [{
      label: 'My Dataset',
      data: xy1,
      showLine: true,
      lineTension: 0.3,
      borderColor: 'rgb(100, 100, 255)'
    }],
  },
  options: {
    scales: {
      x: {
        type: 'timeseries',
        time: {
	  unit: 'hour',
          stepSize: 15,
          displayFormats: {
//	  minute: 'D MMM yyyy HH:mm:ss'
	  hour: 'D MMM yyyy HH:mm:ss'
          }
        }
      },
      y: {
        type: 'time',
        time: {
          parser: 'HH:mm',
          unit: 'hour',
          stepSize: 1,
          displayFormats: {
            hour: 'HH:mm'
          },
          tooltipFormat: 'HH:mm'
        },
        ticks: {
          min: '00:00',
          max: '08:00'
        }
      }
    }
  }
});
</script>
</body>
</html>
